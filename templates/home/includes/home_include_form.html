{% block content %}


    <div class="row">
        <form id="insert" method="post" action={% url 'pipeline' %}>
                {% csrf_token %}
            <div class="col-sm-12" style="background-color: #CDC9C9">
                <div class="col-sm-2">
                    <button id="button" onclick="" class="btn" style="background-color: #444444; color: #FFFFFF; margin: 10px">Editar opções de formulário</button>
                </div>
            </div>
            <div class="col-sm-12" style="background-color: #e5e5e5">
                <h2 class="display-1" style="color: #0e5741; border-bottom: 2px solid#0dbf7e">Informações Gerais</h2>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="">Regional</label>
                            <div>
                                {{ form.regional }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="">Filial</label>
                            <div>
                                {{ form.filial }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="">Comercial</label>
                            <div>
                                {{ form.comercial }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <div class="form-group">
                            <label for="">Corretor</label>
                            <div>
                                {{ form.corretor }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="form-group">
                            <label for="">Cliente</label>
                            <div>
                                {{ form.cliente }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label for="">Produto</label>
                            <div>
                                {{ form.produto }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12" style="background-color: #e5e5e5">
                <h2 class="display-1" style="color: #0e5741; border-bottom: 2px solid#0dbf7e">Informações da Conta</h2>
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Data de Recebimento</label>
                            <div>
                                {{ form.recebimento }}
                                <script>
                                    $(document).ready(function(){
                                        var date_input = $('input[name="recebimento"]'); //our date input has the name "date"
                                        var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
                                        var options = {
                                            format: 'dd/mm/yyyy',
                                            language: "pt-BR",
                                            container: container,
                                            todayHighlight: true,
                                            autoclose: true
                                        };
                                        date_input.datepicker(options);
                                    })
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Previsão de Fechamento</label>
                            <div>
                                {{ form.fechamento }}
                                <script>
                                    $(document).ready(function(){
                                        var date_input = $('input[name="fechamento"]'); //our date input has the name "date"
                                        var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
                                        var options = {
                                            format: 'dd/mm/yyyy',
                                            language: "pt-BR",
                                            container: container,
                                            todayHighlight: true,
                                            autoclose: true
                                        };
                                        date_input.datepicker(options);
                                    })
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Vencimento da Apólice</label>
                            <div>
                                {{ form.vencimento }}
                                <script>
                                    $(document).ready(function(){
                                        var date_input = $('input[name="vencimento"]'); //our date input has the name "date"
                                        var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
                                        var options = {
                                            format: 'dd/mm/yyyy',
                                            language: "pt-BR",
                                            container: container,
                                            todayHighlight: true,
                                            autoclose: true
                                        };
                                        date_input.datepicker(options);
                                    })
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Prêmio</label>
                            <div>
                                {{ form.premio }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Tipo de Seguro</label>
                            <div>
                                {{ form.tipo_de_seguro }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Expectativa</label>
                            <div>
                                {{ form.expectativa }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Status</label>
                            <div>
                                {{ form.status }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label for="">Subscritor</label>
                            <div>
                                {{ form.subscritor }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12" id="perda" style="display: none; background-color: #444444">
                <h2 class="display-1" style="color: #0dbf7e; border-bottom: 2px solid#bfbfbf ">Informação de Contas Perdidas</h2>
                <div class="row">
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label for="" style="color: #0dbf7e">Motivo da Perda</label>
                            <div>
                                {{ form.motivo_perda }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label for="" style="color: #0dbf7e">Congênere</label>
                            <div>
                                {{ form.congenere }}
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="form-group">
                            <label for="" style="color: #0dbf7e">Detalhe da Perda</label>
                            <div>
                                {{ form.comentario_perda }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12" style="background-color: #e5e5e5">
                <h2 class="display-1" style="color: #0e5741; border-bottom: 2px solid#0dbf7e">Histórico de Negociação</h2>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            {{ form.historico_1 }}
                        </div>
                    </div>
                </div>
            </div>
            <input type="submit" name="salvar" style="background-color: #444444;color: #FFFFFF; border-radius: 0" class="btn btn-outline-secondary btn-block" value="Salvar"/>
        </form>
    </div>
    <script language="javascript" type="text/javascript">
        var perda = document.getElementById("perda");
        var motivoPerda = document.getElementById("motivo_perda");
        var congenere = document.getElementById("congenere");
        document.getElementById("status").addEventListener("click", displayTextField);
          function displayTextField() {
            var motivo =  document.getElementById("status").value;
            console.log(motivo);
            if (motivo === "4") {
              perda.style.display = "";
              motivoPerda.required = true;
              congenere.required = true;
            } else {
              perda.style.display = "none";
              motivoPerda.required = false;
              congenere.required = false;
            }
          }
    </script>
{% endblock %}